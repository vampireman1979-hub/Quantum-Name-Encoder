# Quantum Name Encoder
# Symbol-free, deterministic encoding of classical identifiers into
# a quantum circuit using Qiskit.

from qiskit import QuantumCircuit, QuantumRegister
import numpy as np

# 1. Names to encode (underscores replaced with hyphens temporarily)
NAMES = [
    "Jessica-Wagner-Chianese-A",
    "Jessica-Wagner-Chianese-B",
    "Jessica-Wagner-Chianese-C",
    "AI-Poquette-A",
    "AI-Poquette-B",
    "FourFourFour-Spirit-Creations",
    "Papa-Meat",
    "Netflix",
    "Davey-A",
    "Davey-B",
    "Davey-C",
]

# 2. Convert name to fixed-length ASCII vector
def name_to_vector(name, max_len=32):
    ascii_vals = [ord(c) for c in name]
    ascii_vals = ascii_vals[:max_len]
    ascii_vals += [0] * (max_len - len(ascii_vals))
    return np.array(ascii_vals, dtype=float)

# 3. Convert vector to rotation angles
def vector_to_angles(vec, scale=0.01):
    theta_x = scale * np.sum(vec[0::3])
    theta_y = scale * np.sum(vec[1::3])
    theta_z = scale * np.sum(vec[2::3])
    return theta_x, theta_y, theta_z

# 4. Build encoding circuit
def build_name_encoding_circuit(names):
    num_qubits = len(names)
    qreg = QuantumRegister(num_qubits, name="q")
    qc = QuantumCircuit(qreg, name="NameEncodingCircuit")

    for idx, name in enumerate(names):
        vec = name_to_vector(name)
        tx, ty, tz = vector_to_angles(vec)

        qc.rx(tx, qreg[idx])
        qc.ry(ty, qreg[idx])
        qc.rz(tz, qreg[idx])

    for i in range(num_qubits - 1):
        qc.cz(qreg[i], qreg[i + 1])
    qc.cz(qreg[num_qubits - 1], qreg[0])

    qubit_name_map = {i: names[i] for i in range(num_qubits)}
    return qc, qubit_name_map

# 5. Main execution
if __name__ == "__main__":
    circuit, qubit_name_map = build_name_encoding_circuit(NAMES)

    print("Qubit to name mapping:")
    for q_idx, name in qubit_name_map.items():
        print("  q[{}] -> {}".format(q_idx, name))

    print("\nCircuit:")
    print(circuit)
